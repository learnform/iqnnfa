package test;

import java.util.Iterator;
import java.util.List;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

import com.dr.model.member.DrMember;
import com.dr.model.product.DrProductInfo;
import com.dr.service.member.DrMemberCarryService;
import com.dr.service.member.DrMemberCrushService;
import com.dr.service.member.DrMemberRecommendedService;
import com.dr.service.product.DrProductInfoService;
import com.dr.service.product.DrProductInvestService;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={"../spring.xml","../spring-mvc.xml","../spring-mybatis.xml"})
public class ProductTest {

	@Autowired
	private DrProductInfoService drProductInfoService;
	@Autowired
	private DrProductInvestService drProductInvestService;
	@Autowired
	public DrMemberCarryService drMemberCarryService;
	@Autowired
	public DrMemberCrushService drMemberCrushService;
	@Autowired
	public DrMemberRecommendedService drMemberRecommendedService;
	
//	@Test
	public void testUpdateProductToEnd(){
		System.out.println("ִ�м�Ϣ����");
		List<DrProductInfo> list = drProductInfoService.selectRaiseSuccesProductInfo();
		char[] ary2 = {'0','0','0','0'};
		int nums = 0;
		for (Iterator iterator = list.iterator(); iterator.hasNext();) {
			DrProductInfo drProductInfo = (DrProductInfo) iterator
					.next();
			try {
				drProductInfoService.updateProductToEnd(drProductInfo,ary2,nums);
			} catch (Exception e) {
				System.out.println(drProductInfo.getFullName()+"==>��Ϣ����ִ��ʧ��");
				e.printStackTrace();
			}
		}
		System.out.println("��Ϣ�������");
	}
	
//	@Test
	public void testSaveInvestRepay(){
		List<DrProductInfo> infoList = drProductInvestService.selectExpireProductInfo();
		for(int i = 0; i < infoList.size(); i++){
			DrProductInfo info = infoList.get(i);
			System.out.println(info.getFullName()+"==>ִ�лؿ�");
			try {
				drProductInvestService.saveInvestRepay(info);
			} catch (Exception e) {
				System.out.println(info.getFullName()+"==>ִ�лؿ�����ʧ��");
				e.printStackTrace();
			}
		}
	}
	
//	@Test
   	public void queryPaymentResult() {
    	try {
    		drMemberCarryService.updatePaymentResult();
		} catch (Exception e) {
			e.printStackTrace();
		}
   	}
	
//	@Test
   	public void queryPayResult() {
    	try {
    		drMemberCrushService.updatePayResult();
		} catch (Exception e) {
			e.printStackTrace();
		}
   	}
   	
//   	@Test
   	public void testRecommend(){
   		try {
			//drMemberRecommendedService.updateRecommendRebate();
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
   	}
	@Test
	public void testCheck(){
		for(int i=0;i<6;i++){
			DrMember drMember = new DrMember();
			drMember.setUid(1);
		}
		
		
	}
}
