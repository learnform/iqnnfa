package cn.iqnnfa;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.Properties;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.BeansException;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;
import org.springframework.core.io.FileSystemResource;
import org.springframework.core.io.Resource;
import org.springframework.core.io.ResourceLoader;
import org.springframework.core.io.support.ResourcePatternResolver;
import org.springframework.util.ResourceUtils;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import cn.iqnnfa.configClass.PropertyUtil;
import cn.iqnnfa.model.DrMember;
import cn.iqnnfa.service.IndexService;

@RestController
//@EnableConfigurationProperties({ConfiguraBean.class,User.class})
public class IndexController{
	private final static Logger logger = LoggerFactory.getLogger(IndexController.class);
	@Value("${activityMsg}")
	private String name;
	//@Value("${my.age}")
	private String age;
	
	@Autowired
	private IndexService indexService;
	
	@RequestMapping(value="/findMemberByUid")
	public String findMemberByUid(){
		Integer uid = 1203;
		DrMember drMember = indexService.findMemberByUid(uid);
		try {
//			indexService.addDocument();
//			indexService.queryDocument();
			//String activeMsg = PropertyUtil.getProperties("activityMsg").replace("{1}", "zhesss");
			String httpFilePath = "file:D:/smsTemplete.properties";
			File httpFile = ResourceUtils.getFile(httpFilePath); 
			String activeMsg = PropertyUtil.getProperties("activityMsg").replace("{1}", "zhesss");
			InputStream in =  new FileInputStream(httpFile);
			Properties properties = new Properties();
			properties.load(in);
			in.close();
			String property = properties.getProperty("activityMsg");
			System.out.println(property);
			System.out.println(activeMsg + "---" + name);
			System.out.println(httpFile);
		} catch (Exception e) {
			// TODO Auto-generated catch block
			logger.error("读取配置文件信息错误");
		}
		//System.out.println(drMember.toString());
		return drMember.getRealName()+drMember.getLastLoginIp()+"....."+drMember.getMobilephone();
	}
	
	
	
}
